{% extends 'base.html' %}
{%load static%}
{% block content %}

<div class="container mt-4">
     
    <h2 class="mb-4"> Search Results for "<span class="fs-1"> {{ query }} </span> "</h2>
    

    <div class="container-fluid">
        <div class="container">
            <div class="row">         
                {%  for post in posts %}
                    <div class="col-lg-4">
                        <div class="position-relative mb-3 border border-radius-10">
                            <a class="h4 d-block text-secondary text-uppercase font-weight-bold" href="{% url 'post-details' post.pk %}">
                                {% if post.image %}
                                <img class="img-fluid" src="{{post.image.url}}" style="object-fit: cover; border-radius: 10px; width: 100%; height: 200px;" alt="{{ post.title }}">
                                {% else %}
                            </a>
                            {% endif %}
                            <div class="bg-white border border-top-0 " style="padding:5px; padding-left: 10px;">
                                <div class="mb-2">
                                    <a class="badge badge-primary  text-dark text-uppercase font-weight-semi-bold p-2 mr-2" href="{% url 'category-posts' post.category.id %}">{{post.category}}</a> {{post.date_posted |date:"M d, Y"}}
                                </div>
                                <a class="h4 d-block mb-3 text-secondary text-uppercase font-weight-bold" href="{% url 'post-details' post.pk %}">{{post.title|truncatechars:10}}</a>
                                <p class="m-0">{{post.content|truncatechars:10}}</p>
                            </div>
                            
                            <div class="d-flex justify-content-between bg-white border border-top-0 p-4">
                                <div class="d-flex align-items-center">
                                <img class="rounded-circle header-profile-user" src="{% static 'dist/assets/images/users/avatar-2.jpg' %}"  alt="Header Avatar" style="width: 20px; height: 20px;">                                    
                                <small>   {{post.author}}</small>
                                </div>
                                <div class="d-flex align-items-center">
                                <small class="ml-3"><i class="far fa-comment mr-2"></i> {{ post.comment_count }} comments</small>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            
            </div>
        </div>
    </div>
    {% comment %} <div class="row g-4">
        {% for post in posts %}
            <div class="col-md-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">{{ post.title}}</h5>
                        <p class="card-text text-muted">
                             <small> Author: {{ post.author }} </small>
                        </p>
                        <p class="card-text">{{ post.content|truncatewords:30 }}</p>
                    </div>
                    <div class="card-footer bg-transparent border-top-0">
                        <a href="{% url 'post-details' post.pk %}" class="btn btn-primary">Read More</a>
                        {% if post.category %}
                            <span class="badge bg-secondary float-end mt-2">{{ post.category }}</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% empty %}
            <p> no result </p>
            {% endfor %}
       
    </div> {% endcomment %}
</div>
{% endblock %}